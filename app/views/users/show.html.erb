<div class="mb-4">
  <h1><%= @user.name %></h1>
  <p style="color: var(--gray-600);">Detalhes do usuário</p>
</div>

<div class="card">
  <div class="card-header">
    <h3 class="card-title">Informações do Usuário</h3>
    <div class="btn-group">
      <%= link_to "Voltar", users_path, class: "btn btn-sm btn-secondary" %>
    </div>
  </div>
  
  <div class="card-body">
    <ul class="detail-list">
      <li class="detail-list-item">
        <span class="detail-list-label">Nome:</span>
        <span class="detail-list-value"><strong><%= @user.name %></strong></span>
      </li>
      
      <li class="detail-list-item">
        <span class="detail-list-label">E-mail:</span>
        <span class="detail-list-value"><%= @user.email %></span>
      </li>
      
      <li class="detail-list-item">
        <span class="detail-list-label">Coordenador:</span>
        <span class="detail-list-value">
          <% coordinator_pastorals = Pastoral.where(coordinator_id: @user.id) %>
          <% if coordinator_pastorals.any? %>
            <span class="badge badge-primary">Sim</span>
            <div style="margin-top: 8px;">
              <% coordinator_pastorals.each do |pastoral| %>
                <div style="margin-bottom: 4px;">
                  <strong>Pastoral:</strong> <%= link_to pastoral.name, pastoral_path(pastoral), style: "color: var(--primary);" %>
                </div>
              <% end %>
            </div>
          <% else %>
            <span class="badge badge-secondary">Não</span>
          <% end %>
        </span>
      </li>
      
      <li class="detail-list-item">
        <span class="detail-list-label">Vice-Coordenador:</span>
        <span class="detail-list-value">
          <% vice_coordinator_pastorals = Pastoral.where(vice_coordinator_id: @user.id) %>
          <% if vice_coordinator_pastorals.any? %>
            <span class="badge badge-primary">Sim</span>
            <div style="margin-top: 8px;">
              <% vice_coordinator_pastorals.each do |pastoral| %>
                <div style="margin-bottom: 4px;">
                  <strong>Pastoral:</strong> <%= link_to pastoral.name, pastoral_path(pastoral), style: "color: var(--primary);" %>
                </div>
              <% end %>
            </div>
          <% else %>
            <span class="badge badge-secondary">Não</span>
          <% end %>
        </span>
      </li>
    </ul>
  </div>
</div>

<% if @user.pastorals.any? %>
  <div class="card">
    <div class="card-header">
      <h3 class="card-title">Pastorais</h3>
    </div>
    
    <div class="card-body">
      <div class="grid grid-2">
        <% @user.pastorals.each do |pastoral| %>
          <div class="card">
            <div class="card-body">
              <h4><%= pastoral.name %></h4>
              <%= link_to "Ver Pastoral", pastoral_path(pastoral), class: "btn btn-sm btn-secondary mt-2" %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
<% end %>
