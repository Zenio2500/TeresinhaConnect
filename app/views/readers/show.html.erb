<div class="mb-4">
  <h1>Leitor: <%= @reader.user&.name || 'N/A' %></h1>
  <p style="color: var(--gray-600);">Detalhes do leitor</p>
</div>

<div class="card">
  <div class="card-header">
    <h3 class="card-title">Informações do Leitor</h3>
    <div class="btn-group">
      <%= link_to "Editar", edit_reader_path(@reader), class: "btn btn-sm btn-warning" %>
      <%= link_to "Voltar", readers_path, class: "btn btn-sm btn-secondary" %>
    </div>
  </div>
  
  <div class="card-body">
    <ul class="detail-list">
      <li class="detail-list-item">
        <span class="detail-list-label">Nome:</span>
        <span class="detail-list-value">
          <% if @reader.user %>
            <%= link_to @reader.user.name, user_path(@reader.user), class: "btn btn-sm btn-secondary" %>
          <% else %>
            N/A
          <% end %>
        </span>
      </li>
      
      <li class="detail-list-item">
        <span class="detail-list-label">Disponibilidade:</span>
        <span class="detail-list-value">
          <% if @reader.disponibility.present? %>
            <% @reader.disponibility.each do |disp| %>
              <span class="badge badge-primary" style="margin-right: var(--spacing-xs);"><%= disp %></span>
            <% end %>
          <% else %>
            <span class="badge badge-secondary">Não especificada</span>
          <% end %>
        </span>
      </li>
      
      <li class="detail-list-item">
        <span class="detail-list-label">Tipos de Leitura:</span>
        <span class="detail-list-value">
          <% if @reader.read_types.present? %>
            <% @reader.read_types.each do |type| %>
              <span class="badge badge-success" style="margin-right: var(--spacing-xs);"><%= type %></span>
            <% end %>
          <% else %>
            <span class="badge badge-secondary">Não especificado</span>
          <% end %>
        </span>
      </li>
    </ul>
  </div>
</div>

<!-- Histórico de Participações em Escalas -->
<div class="card mt-4">
  <div class="card-header">
    <h3 class="card-title">Histórico de Participações</h3>
    <span class="badge badge-info"><%= @participations.count %> participações</span>
  </div>
  
  <div class="card-body">
    <% if @participations.any? %>
      <div class="table-container">
        <table class="table">
          <thead>
            <tr>
              <th style="width: 150px;">Data</th>
              <th style="width: 200px;">Função</th>
              <th>Descrição da Celebração</th>
              <th class="text-center" style="width: 100px;">Ações</th>
            </tr>
          </thead>
          <tbody>
            <% @participations.each do |participation| %>
              <tr>
                <td><strong><%= participation.grade.date.strftime("%d/%m/%Y") %></strong></td>
                <td>
                  <span class="badge badge-primary"><%= participation.reader_type %></span>
                </td>
                <td>
                  <% if participation.grade.description.present? %>
                    <%= participation.grade.description %>
                  <% else %>
                    <span style="color: var(--gray-500);">Sem descrição</span>
                  <% end %>
                </td>
                <td class="text-center">
                  <%= link_to "Ver Escala", grade_path(participation.grade), class: "btn btn-sm btn-secondary" %>
                </td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    <% else %>
      <p style="color: var(--gray-600); text-align: center; padding: var(--spacing-xl);">
        Este leitor ainda não participou de nenhuma escala.
      </p>
    <% end %>
  </div>
</div>
